#!/bin/bash

# Arguments with default values
APP_NAME="${1:-placeholder}"
ICON="${2:-system-run}"
TITLE="${3:-Placeholder}"
MESSAGE="${4:-This is a test.}"
TRANSIENT="${5:-true}"
SOUND="${6:-}"
PROGRESS="${7:-}"
ACTION="${8:-}"

# Build the command arguments in an array
args=(
    -a "$APP_NAME"
    -h "string:x-canonical-private-synchronous:$APP_NAME"
    -h "boolean:transient:$TRANSIENT"
    -i "$ICON"
)

# Add progress bar only if the 7th argument is provided
if [[ -n "$PROGRESS" ]]; then
    args+=(-h "int:value:$PROGRESS")
fi

if [[ -n "$ACTION" ]]; then
    args+=(-A "$ACTION")
fi

# Run the command once
notify-send "${args[@]}" "$TITLE" "$MESSAGE"

if [[ -n "$SOUND" ]]; then
    playsound "$SOUND"
fi
